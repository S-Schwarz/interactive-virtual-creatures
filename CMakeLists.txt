cmake_minimum_required(VERSION 3.19)
project(interactive_virtual_creatures)

find_package(Freetype REQUIRED)

add_compile_definitions(NDEBUG)

set(GLFW_BUILD_DOCS OFF CACHE BOOL "" FORCE)
set(GLFW_BUILD_TESTS OFF CACHE BOOL "" FORCE)
set(GLFW_BUILD_EXAMPLES OFF CACHE BOOL "" FORCE)

set(NANOGUI_BUILD_EXAMPLE OFF CACHE BOOL " " FORCE)
set(NANOGUI_BUILD_PYTHON  OFF CACHE BOOL " " FORCE)
set(NANOGUI_INSTALL       OFF CACHE BOOL " " FORCE)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_FLAGS "-lglfw3 -Wl,--no-as-needed -ldl -lGL -lX11 -pthread -lXrandr -lXi")

add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/Res/glfw ${CMAKE_CURRENT_SOURCE_DIR}/Res/nanogui)

# Various preprocessor definitions have been generated by NanoGUI
add_definitions(${NANOGUI_EXTRA_DEFS})

INCLUDE_DIRECTORIES(${FREETYPE_INCLUDE_DIRS} ${CMAKE_CURRENT_SOURCE_DIR}/Res/PhysX/physx/include ${CMAKE_CURRENT_SOURCE_DIR}/Res/PhysX/pxshared/include
        ${CMAKE_CURRENT_SOURCE_DIR}/Res/glfw/include ${CMAKE_CURRENT_SOURCE_DIR}/Res/GLAD/include ${CMAKE_CURRENT_SOURCE_DIR}/Res/glm ${NANOGUI_EXTRA_INCS} ${CMAKE_CURRENT_SOURCE_DIR}/Res/nanogui/include)
LINK_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Res/PhysX/physx/bin/linux.clang/release ${CMAKE_CURRENT_SOURCE_DIR}/Res/glfw-build/src)

add_executable(interactive_virtual_creatures
        main.cpp Res/glad.c App/App.h App/App.cpp Res/ShapeHandler.h Res/ShapeHandler.cpp
        Control/NeuronCluster.h Control/NeuronCluster.cpp Constants.h
        Body/BaseNode.h Body/BaseNode.cpp Body/PhysicalCreature.h Body/PhysicalCreature.cpp Control/Neuron.h Control/Neuron.cpp
        Control/Gate.h Control/Gate.cpp
        Control/Joints/JointSensor.h Control/Joints/JointSensor.cpp Control/Joints/JointEffector.h Control/Joints/JointEffector.cpp Control/IDHandler.h Control/IDHandler.cpp
        Mutator.h Physics/PhysicsBase.cpp Physics/PhysicsBase.h Physics/PhysicsScene.cpp Physics/PhysicsScene.h Physics/LiveEnvironment.cpp Physics/LiveEnvironment.h
        Evolution/Evolver.cpp Evolution/Evolver.h Res/stb_image.h Control/ContactSensor.cpp Control/ContactSensor.h Physics/ContactReporter.h Evolution/EvoData.cpp Evolution/EvoData.h App/NeuronVisualizer.cpp App/NeuronVisualizer.h App/GUIWindow.cpp App/GUIWindow.h Evolution/EvoConfig.cpp Evolution/EvoConfig.h)

TARGET_LINK_LIBRARIES(interactive_virtual_creatures ${FREETYPE_LIBRARIES} ${CMAKE_CURRENT_SOURCE_DIR}/Res/nanogui/libnanogui.so ${NANOGUI_EXTRA_LIBS} glfw3.a PhysXExtensions_static_64.a PhysX_static_64.a PhysXPvdSDK_static_64.a PhysXCommon_static_64.a PhysXFoundation_static_64.a  )

